<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NieR:Automata</title>
    <style>
        body {
            background-color: #d1cdb7;
            font-family: "Courier New", monospace;
            color: #ffffff;
            text-shadow: 1px 1px 2px #000;
            font-size: 1.5rem;
            background-size: cover;
            background-repeat: no-repeat;
        }
html, body {
    height: 100%;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.container {
    width: 80vw; 
    height: 18vh;
    max-width: 1200px;
    max-height: 600px; 
    padding: 45px;
    background-color: rgba(0, 0, 0, 0.6);
    border-radius: 15px;
    box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.5);
    box-sizing: border-box; 
	text-align: center; 
}
.container {
    margin-top: -20px;
}

        label {
            font-size: 1.8rem;

            display: block;
            color: #cccccc;
        }
select, input {
    width: 100%;
    padding: 15px;
    margin-bottom: 30px;
    border-radius: 5px;
    border: none;
    background-color: #2c2c2c;
    color: #ffffff;
    font-size: 1.5rem;
    opacity: 0.65;
}


        .flag {
            width: 45px;
            height: 30px;
            position: fixed;
            top: 20px;
            right: 20px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .flag:hover {
            transform: scale(1.1);
        }
#result {
    font-size: 2.25rem;
    text-align: center;
    margin-top: 30px;
    color: #ffffff; 
    cursor: pointer; 
    background: linear-gradient(45deg, #ffffff, #ffffff); 
    -webkit-background-clip: text; 
    -webkit-text-fill-color: transparent; 
    text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5); 
    font-weight: bold; 
    transition: color 0.3s, transform 0.3s; 
}

#result:hover {
    color: #ffffff; 
    transform: scale(1.05); 
}

label {
    margin-bottom: 25px; 
    margin-top: -15px; 
}

        input[type="number"] {
            -moz-appearance: textfield;
            -webkit-appearance: none;
            appearance: none;
        }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%; 
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.8);
        }
        .modal-content {
            background-color: rgba(44, 44, 44, 0.95);
            margin:  auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 15px;
            font-family: "Courier New", monospace;
            color: #ffffff;
        }
        .country-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .country-list li {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #555;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .country-list li:hover {
            background-color: #2c2c2c;
        }
        .country-list img {
            margin-right: 10px;
            width: 32px;
            height: 24px;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: #ffffff;
            text-decoration: none;
            cursor: pointer;
        }
        .currency-symbol {
            position: absolute;
            right: 15px;
            bottom: 43px;
            pointer-events: none;
            color: rgba(255, 255, 255, 0.5);
            font-size: 1.5rem;
        }
        .input-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        label {
            display: block;
            margin-bottom: 10px;
        }

        .currency-symbol {
            margin-left: 5px;
        }
.notification {
    display: none;
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 20px;
    background-color: rgba(0, 0, 0, 0.8);
    color: #ffffff;
    border-radius: 10px;
    box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.5);
    font-size: 1.5rem;
    text-align: center;
    animation: fadeIn 0.5s ease-in-out, fadeOut 0.5s ease-in-out 1s;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
    to {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
    }
}

Memory updated
Вот как можно реализовать динамическое добавление кнопок с анимацией, основанной на количестве копий, и как сделать так, чтобы иконки автоматически выделялись:

HTML
Добавьте контейнер для кнопок и их элементы:

html
Copy code
<div id="result"></div>
<div id="purchaseButtons" style="display: none;"></div>
CSS
Добавьте стили для кнопок и анимации:

css
Copy code
#purchaseButtons {
    display: flex;
    gap: 10px;
    margin-top: 20px;
    transition: opacity 0.5s ease-in-out;
}

.purchase-button {
    display: flex;
    align-items: center;
    padding: 10px;
    border: none;
    border-radius: 5px;
    background-color: #333;
    color: #fff;
    font-size: 1rem;
    cursor: pointer;
    transition: transform 0.3s, box-shadow 0.3s;
    opacity: 0;
}

.purchase-button img {
    width: 30px;
    height: 30px;
    margin-right: 10px;
    transition: transform 0.3s;
}

.purchase-button:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
}

.purchase-button.show {
    opacity: 1;
}

.purchase-button.highlight {
    filter: drop-shadow(0 0 10px #fff) brightness(1.2);
}
    </style>
</head>
<body>





<div class="container">
    <label for="amount">Your money amount</label>
    <div class="input-container">
        <input type="number" id="amount" placeholder="Amount">
        <span class="currency-symbol" id="currencySymbol"></span>
    </div>
<div id="result"></div>
<div id="purchaseButtons" style="display: none;"></div>
</div>

<div id="notification" class="notification">
    <p>NieR:Automata недоступна в вашей стране. Переключаемся на США.</p>
</div>


<div id="countryModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Select your country</h2>
		<ul class="country-list">
		<li data-country-code="US"><img src="https://flagcdn.com/48x36/us.png" alt="USA Flag"> United States</li>
		<li data-country-code="UA"><img src="https://flagcdn.com/48x36/ua.png" alt="Ukraine Flag"> Ukraine</li>
		<li data-country-code="RU"><img src="https://flagcdn.com/48x36/ru.png" alt="Russia Flag"> Russia</li>
		<li data-country-code="PL"><img src="https://flagcdn.com/48x36/pl.png" alt="Poland Flag"> Poland</li>

		<li data-country-code="KZ"><img src="https://flagcdn.com/48x36/kz.png" alt="Kazakhstan Flag"> Kazakhstan</li>
		<li data-country-code="KR"><img src="https://flagcdn.com/48x36/kr.png" alt="South Korea Flag"> South Korea</li>
		<li data-country-code="BR"><img src="https://flagcdn.com/48x36/br.png" alt="Brazil Flag"> Brazil</li>
		<li data-country-code="MX"><img src="https://flagcdn.com/48x36/mx.png" alt="Mexico Flag"> Mexico</li>
		<li data-country-code="IN"><img src="https://flagcdn.com/48x36/in.png" alt="India Flag"> India</li>
		<li data-country-code="UY"><img src="https://flagcdn.com/48x36/uy.png" alt="Uruguay Flag"> Uruguay</li>
		<li data-country-code="KW"><img src="https://flagcdn.com/48x36/kw.png" alt="Kuwait Flag"> Kuwait</li>
		<li data-country-code="ZA"><img src="https://flagcdn.com/48x36/za.png" alt="South Africa Flag"> South Africa</li>
		<li data-country-code="CR"><img src="https://flagcdn.com/48x36/cr.png" alt="Costa Rica Flag"> Costa Rica</li>
		<li data-country-code="CO"><img src="https://flagcdn.com/48x36/co.png" alt="Colombia Flag"> Colombia</li>
		<li data-country-code="NO"><img src="https://flagcdn.com/48x36/no.png" alt="Norway Flag"> Norway</li>
		<li data-country-code="CL"><img src="https://flagcdn.com/48x36/cl.png" alt="Chile Flag"> Chile</li>
		<li data-country-code="VN"><img src="https://flagcdn.com/48x36/vn.png" alt="Vietnam Flag"> Vietnam</li>
		<li data-country-code="TH"><img src="https://flagcdn.com/48x36/th.png" alt="Thailand Flag"> Thailand</li>
		<li data-country-code="IL"><img src="https://flagcdn.com/48x36/il.png" alt="Israel Flag"> Israel</li>
		<li data-country-code="SG"><img src="https://flagcdn.com/48x36/sg.png" alt="Singapore Flag"> Singapore</li>
		<li data-country-code="PE"><img src="https://flagcdn.com/48x36/pe.png" alt="Peru Flag"> Peru</li>
		<li data-country-code="EU"><img src="https://flagcdn.com/48x36/eu.png" alt="Euro Flag"> Eurozone</li>
		<li data-country-code="CH"><img src="https://flagcdn.com/48x36/ch.png" alt="Switzerland Flag"> Switzerland</li>
		<li data-country-code="JP"><img src="https://flagcdn.com/48x36/jp.png" alt="Japan Flag"> Japan</li>
		<li data-country-code="MY"><img src="https://flagcdn.com/48x36/my.png" alt="Malaysia Flag"> Malaysia</li>
		<li data-country-code="PH"><img src="https://flagcdn.com/48x36/ph.png" alt="Philippines Flag"> Philippines</li>
		<li data-country-code="HK"><img src="https://flagcdn.com/48x36/hk.png" alt="Hong Kong Flag"> Hong Kong</li>
		<li data-country-code="GB"><img src="https://flagcdn.com/48x36/gb.png" alt="United Kingdom Flag"> United Kingdom</li>
		<li data-country-code="CA"><img src="https://flagcdn.com/48x36/ca.png" alt="Canada Flag"> Canada</li>

		</ul>
    </div>
</div>

<img id="countryFlag" src="" alt="" style="cursor: pointer; position: absolute; top: 20px; right: 20px;" />

    <script>
        const steamAppId = '524220';
		const currencyMap = {
			"AED": "United Arab Emirates Dirham",
			"AUD": "Australian Dollars",
			"BRL": "Brazilian Reals",
			"CAD": "Canadian Dollars",
			"CHF": "Swiss Francs",
			"CLP": "Chilean Peso",
			"CNY": "Chinese Renminbi (yuan)",
			"COP": "Colombian Peso",
			"CRC": "Costa Rican Colón",
			"EUR": "European Union Euro",
			"GBP": "United Kingdom Pound",
			"HKD": "Hong Kong Dollar",
			"ILS": "Israeli New Shekel",
			"IDR": "Indonesian Rupiah",
			"INR": "Indian Rupee",
			"JPY": "Japanese Yen",
			"KRW": "South Korean Won",
			"KWD": "Kuwaiti Dinar",
			"KZT": "Kazakhstani Tenge",
			"MXN": "Mexican Peso",
			"MYR": "Malaysian Ringgit",
			"NOK": "Norwegian Krone",
			"NZD": "New Zealand Dollar",
			"PEN": "Peruvian Sol",
			"PHP": "Philippine Peso",
			"PLN": "Polish Złoty",
			"QAR": "Qatari Riyal",
			"RUB": "Russian Rouble",
			"SAR": "Saudi Riyal",
			"SGD": "Singapore Dollar",
			"THB": "Thai Baht",
			"TWD": "New Taiwan Dollar",
			"UAH": "Ukrainian Hryvnia",
			"USD": "United States Dollar",
			"UYU": "Uruguayan Peso",
			"VND": "Vietnamese Dong",
			"ZAR": "South African Rand",
			"GEL": "Georgian Lari",
			"HRK": "Croatian Kuna",
			"HUF": "Hungarian Forint",
			"LKR": "Sri Lankan Rupee",
			"MDL": "Moldovan Leu",
			"RON": "Romanian Leu",
			"SEK": "Swedish Krona",
			"UGX": "Ugandan Shilling",
			"MNT": "Mongolian Tugrik",
			"TZS": "Tanzanian Shilling",
			"BAM": "Bosnia and Herzegovina Convertible Mark",
			"GHS": "Ghanaian Cedi",
			"BND": "Brunei Dollar",
			"SBD": "Solomon Islands Dollar",
			"MOP": "Macanese Pataca",
			"PGK": "Papua New Guinean Kina"
		};


        async function getIpAndLocation() {
            const response = await fetch('https://ipapi.co/json/');
            const data = await response.json();
            return data;
        }

function getCurrencySymbol(currencyCode) {
    const symbols = {
        "USD": "$",
        "EUR": "€",
        "GBP": "£",
        "JPY": "¥",
        "RUB": "₽",
        "UAH": "₴",
        "BRL": "R$",
        "CAD": "C$",
        "AUD": "A$",
        "CHF": "Fr",
        "CNY": "¥",
        "KRW": "₩",
        "INR": "₹",
        "MXN": "Mex$",
        "PLN": "zł",
        "ZAR": "R",
        "TRY": "₺",
        "AED": "د.إ",
        "THB": "฿",
        "TWD": "NT$",
        "SAR": "ر.س",
        "QAR": "ر.ق",
        "KWD": "د.ك",
        "KZT": "₸",
        "MYR": "RM",
        "IDR": "Rp",
        "ILS": "₪",
        "COP": "$",
        "CRC": "₡",
        "PEN": "S/",
        "PHP": "₱",
        "VND": "₫",
        "CLP": "$",
        "RUB": "₽",
        "GEL": "₾",
        "HRK": "kn",
        "HUF": "Ft",
        "LKR": "Rs",
        "MDL": "L",
        "NOK": "kr",
        "RON": "lei",
        "SEK": "kr",
        "UGX": "USh",
        "MNT": "₮",
        "TZS": "TSh",
        "NAD": "$",
        "ZWL": "$",
        "BAM": "KM",
        "GHS": "₵",
        "BND": "$",
        "SBD": "$",
        "MOP": "MOP$",
        "PGK": "K"
    };
    return symbols[currencyCode] || currencyCode;
}



        async function getGamePrice(countryCode) {
            const url = `https://store.steampowered.com/api/appdetails?appids=${steamAppId}&cc=${countryCode}&l=english&v=1`;
            const response = await fetch(url);
            const data = await response.json();
            return data;
        }

        document.getElementById('countryFlag').addEventListener('click', function() {
            const modal = document.getElementById('countryModal');
            modal.style.display = "block";
        });

        document.querySelector('.close').addEventListener('click', function() {
            const modal = document.getElementById('countryModal');
            modal.style.display = "none";
        });

        window.addEventListener('click', function(event) {
            const modal = document.getElementById('countryModal');
            if (event.target == modal) {
                modal.style.display = "none";
            }
        });

        document.querySelectorAll('.country-list li').forEach(item => {
            item.addEventListener('click', async function() {
                const selectedCountryCode = item.getAttribute('data-country-code');
                const flagSrc = item.querySelector('img').src;
                document.getElementById('countryFlag').src = flagSrc;
                document.getElementById('countryFlag').setAttribute('data-country-code', selectedCountryCode);
                document.getElementById('countryModal').style.display = "none";
                await updatePrice(selectedCountryCode);
            });
        });
async function updatePrice(countryCode) {
    try {
        const priceData = await getGamePrice(countryCode);
        const amountInput = document.getElementById('amount');
        const priceElement = document.getElementById('result');
        const currencySymbol = document.getElementById('currencySymbol');
        const countryFlag = document.getElementById('countryFlag');
        const purchaseButtons = document.getElementById('purchaseButtons');

        // Ensure the priceData is in the expected format
        if (priceData[steamAppId] && priceData[steamAppId].data && priceData[steamAppId].data.price_overview) {
            const price = priceData[steamAppId].data.price_overview.final / 100;
            let currencyCode = priceData[steamAppId].data.price_overview.currency;

            // Проверка флага для установки символа евро
            if (countryFlag.getAttribute('data-country-code') === 'EU') {
                currencyCode = 'EUR';
            }
            
            currencySymbol.textContent = getCurrencySymbol(currencyCode);

            amountInput.addEventListener('input', function() {
                const amount = parseFloat(amountInput.value);
                if (!isNaN(amount)) {
                    const convertedAmount = Math.floor(amount / price);
                    if (convertedAmount > 0) {
                        priceElement.textContent = `You can buy ${convertedAmount} copies of NieR:Automata.`;
                        showPurchaseButtons();
                    } else {
                        priceElement.textContent = '';
                        hidePurchaseButtons();
                    }
                } else {
                    priceElement.textContent = '';
                    hidePurchaseButtons();
                }
            });

            const amount = parseFloat(amountInput.value);
            if (!isNaN(amount)) {
                const convertedAmount = Math.floor(amount / price);
                if (convertedAmount > 0) {
                    priceElement.textContent = `You can buy ${convertedAmount} copies of NieR:Automata.`;
                    showPurchaseButtons();
                } else {
                    priceElement.textContent = '';
                    hidePurchaseButtons();
                }
            }
        } else {
            throw new Error('Price information not available');
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('NieR:Automata is not available in your country. Switch to the USA.');
        document.getElementById('countryFlag').src = 'https://flagcdn.com/48x36/us.png';
        await updatePrice('US');
    }
}

function showPurchaseButtons() {
    const buttonsContainer = document.getElementById('purchaseButtons');
    buttonsContainer.innerHTML = `
        <a href="https://www.xbox.com/games/store/nier-automata-become-as-gods-edition/bppzvt8bz15n" target="_blank" class="purchase-button">
            <img src="https://raw.githubusercontent.com/moshiax/priceinautomata/main/xbox.png" alt="Xbox">
            Buy on Xbox
        </a>
        <a href="https://store.steampowered.com/app/524220/NieRAutomata/" target="_blank" class="purchase-button">
            <img src="https://raw.githubusercontent.com/moshiax/priceinautomata/main/steam.png" alt="Steam">
            Buy on Steam
        </a>
        <a href="https://weblet.square-enix.com/elink.php?doc=NIERAUTO&code=WEBSITE&lang=us&id=STORE19&store=Walmart&platform=PS4&edition=Game+of+the+Yorha+Edition&_gl=1*jxvhee*_gcl_au*MTQ3MzMzODA2Ny4xNzI0OTEwMTg2&_ga=2.174762210.1729472430.1724910187-1926933269.1724910187" target="_blank" class="purchase-button">
            <img src="https://raw.githubusercontent.com/moshiax/priceinautomata/main/walmart.png" alt="Walmart">
            Buy on Walmart
        </a>
    `;

    setTimeout(() => {
        const buttons = buttonsContainer.querySelectorAll('.purchase-button');
        buttons.forEach(button => button.classList.add('show'));
    }, 100);
}

function hidePurchaseButtons() {
    const buttonsContainer = document.getElementById('purchaseButtons');
    const buttons = buttonsContainer.querySelectorAll('.purchase-button');
    buttons.forEach(button => button.classList.remove('show'));
    setTimeout(() => {
        buttonsContainer.innerHTML = '';
    }, 500);
}

function showNotification(message) {
    const notification = document.getElementById('notification');
    notification.querySelector('p').textContent = message;
    notification.style.display = 'block';
    notification.style.animation = 'fadeIn 0.5s ease-in-out';

    setTimeout(() => {
        notification.style.animation = 'fadeOut 0.5s ease-in-out';
        setTimeout(() => {
            notification.style.display = 'none';
            notification.style.animation = ''; 
        }, 500); 
    }, 1500);
}


        function setRandomBackground() {
            const backgrounds = [
                'https://raw.githubusercontent.com/moshiax/priceinautomata/main/background.jpg',
                'https://raw.githubusercontent.com/moshiax/priceinautomata/main/background1.jpg'
            ];
            const randomIndex = Math.floor(Math.random() * backgrounds.length);
            document.body.style.backgroundImage = `url(${backgrounds[randomIndex]})`;
        }

        window.addEventListener('load', async function() {
            setRandomBackground();
            const locationData = await getIpAndLocation();
            const countryCode = locationData.country_code;
            document.getElementById('countryFlag').src = `https://flagcdn.com/48x36/${countryCode.toLowerCase()}.png`;
            await updatePrice(countryCode);
        });
    </script>


</body>
</html>
